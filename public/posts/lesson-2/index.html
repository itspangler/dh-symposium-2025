<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Lesson 2: Georeferencing in Allmaps - Boston DH 2025: How to make a map mosaic</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Provides an overview of georeferencing in the Allmaps software ecosystem" />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="https://itspangler.github.io/dh-symposium-2025/posts/lesson-2/">
  <meta property="og:site_name" content="Boston DH 2025: How to make a map mosaic">
  <meta property="og:title" content="Lesson 2: Georeferencing in Allmaps">
  <meta property="og:description" content="Provides an overview of georeferencing in the Allmaps software ecosystem">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-04-09T02:01:58+05:30">
    <meta property="article:modified_time" content="2025-04-09T02:01:58+05:30">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Lesson 2: Georeferencing in Allmaps">
  <meta name="twitter:description" content="Provides an overview of georeferencing in the Allmaps software ecosystem">

        <link href="https://itspangler.github.io/dh-symposium-2025/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://itspangler.github.io/dh-symposium-2025/css/main.63ab96e4d304db1dcb2caed78c165ffd30d59f8e9f35f071bddc7898492cb682.css" />
</head>
<body>
        <div class="content"><header style="background-color:dodgerblue;color:white;padding:2em;width:100%;">
<div class="main">
		<a href="https://itspangler.github.io/">Boston DH 2025: How to make a map mosaic</a>
	</div>
	<i>A workshop from AGSL and LMEC on using Allmaps to georeference digital map collections</i>
	<nav>
		
		
	</nav>
</header>

<main>
  <article>
    <div class="post-container">
      
      <div class="post-content">
        <div class="title">
          <h1 class="title" style="font-size:2.4em;">Lesson 2: Georeferencing in Allmaps</h1>
          <div class="meta">Posted on Apr 9, 2025</div>
        </div>
        
        <section class="body">
          

<div class='callout callout-custom' style='background-color:rgb(244, 228, 245); border: 1px dotted #d340e0;'>
  <div class="callout-inner">
    
    ðŸ“š <u>Lesson plan</u>
    <br />
    In this lesson, we&#39;ll get hands-on experience georeferencing maps in Allmaps, including an overview of the georeferencing workflow. Follow along!
    
    </div>
</div>

<h2 id="allmaps-editor">Allmaps Editor</h2>
<p>If you haven&rsquo;t already, launch the Allmaps Editor by going to <a href="https://editor.allmaps.org">editor.allmaps.org</a>.</p>
<p>You can choose a map by either:</p>
<ol>
<li>Entering a <strong>IIIF Manifest URL</strong> in the text box at the top of the page</li>
<li>Scrolling down to find a map in one of the highlighted collections</li>
</ol>
<p><img src="../../images/georef_nz1_start.png" alt="Start screen of the Allmaps Editor"></p>
<h2 id="masking">Masking</h2>
<p>The first step is adding a <strong>mask</strong>. This involves drawing a line around the &ldquo;map&rdquo; areas of the document to exclude the collar or marginalia. In other words, you&rsquo;re identifying the part of the scanned image that you want to actually overlay.</p>
<p>Use the <strong>Draw Mask</strong> tab to add a mask. Click to add points, and double-click to close the polygon. If you mess up, click <strong>Cancel</strong> to start over.</p>
<p><img src="../../images/georef_nz3_Mask.png" alt="Drawing a mask in Allmaps"></p>


<div class='callout callout-tip' style=''>
  <div class="callout-inner">
    
    ðŸ”Ž
    
    <u>Tip</u>
    
    <br />
    You can hold down `shift` while clicking on a point to remove that vertex from your mask. Try it out!
    
    </div>
</div>

<p>It&rsquo;s possible your image includes multiple maps! Each map gets its own mask.</p>
<p><img src="../../images/greenpoint.jpg" alt="Example of a scanned page with multiple maps"></p>
<p>Much of the time, your mask will simply be a rectangle drawn just inside the map&rsquo;s neatline.</p>
<p><img src="../../images/georef_nz4_MaskCorner.png" alt="A rectangular mask drawn near the map corners"></p>
<h2 id="ground-control-points">Ground Control Points</h2>
<p>Ground control points&mdash;also known as <strong>GCPs</strong>&mdash;guide Allmaps in aligning the scanned image (left side) with real-world geography (right side).</p>
<p>Use the <strong>Georeference</strong> tab to begin placing GCPs. To create one, find a location that clearly matches on both sidesâ€”such as a street intersection or the corner of a recognizable building. Click the same spot on both images.</p>
<p><img src="../../images/georef_nz2_GCP.png" alt="Adding ground control points in Allmaps"></p>
<p>Because we will be focusing in this workshop on urban atlases, consider the following best practices for georeferencing them:</p>
<ul>
<li><strong>Avoid water bodies</strong>: they change too much over time to be reliable.</li>
<li><strong>Use roads and buildings</strong>: as long as they havenâ€™t been torn down or significantly altered.</li>
<li><strong>Check your progress</strong>: sometimes only a few GCPs are needed. Too many can actually introduce unwanted distortion. A good check-in is after placing 5â€“10 points.</li>
</ul>


<div class='callout callout-alert' style=''>
  <div class="callout-inner">
    
    ðŸš¨
    
    <u>Alert</u>
    
    <br />
    Rememberâ€”landscapes change! Roads shift, water levels fluctuate, buildings appear and disappear.
    
    </div>
</div>

<h2 id="what-is-this-doing">What is this doing?</h2>
<p>Behind the scenes, placing GCPs in Allmaps creates a <strong>Georeference Annotation</strong>:</p>
<p><img src="../../images/georef_nz2_2.png" alt="Diagram of resource vs geometry coordinates"></p>
<p>A <a href="https://iiif.io/api/extension/georef/">Georeference Annotation</a> is a standard format for storing geospatial information associated with a IIIF image. The Annotation specification is maintained by the <a href="https://iiif.io">IIIF Consortium</a>.</p>
<p>Each point creates a pair of values:</p>
<ul>
<li><strong>Resource coordinates</strong>: pixel location in the image (e.g. 3017, 4367)</li>
<li><strong>Geometry coordinates</strong>: geographic location in longitude/latitude (e.g. 172.936215Â°E, 43.7589394Â°S)</li>
</ul>
<p>Allmaps uses this data to calculate the warping or stretching needed to align the image over the map. 6-digit coordinate precision is probably overkill, but hey&mdash;it gives us an excuse to use <a href="https://xkcd.com/2170">one of our favorite xkcd comics</a> :)</p>
<h2 id="example-georeference-annotation">Example georeference annotation</h2>
<p>Here&rsquo;s a full georeference annotation, excerpted from this &ldquo;<a href="https://editor.allmaps.org/images?url=https%3A%2F%2Fcollections.leventhalmap.org%2Fsearch%2Fcommonwealth%3Amc87sd17s%2Fmanifest&amp;image=https%3A%2F%2Fiiif.digitalcommonwealth.org%2Fiiif%2F2%2Fcommonwealth%3Azc77wd40b">scrimshaw map of Cape Cod</a>&rdquo; in LMEC&rsquo;s collections.</p>
<p>Take a moment to inspect this. Can you make sense of what each <code>key</code> (or the red text) and each <code>value</code> (or the purple and yellow text) is communicating?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;AnnotationPage&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;@context&#34;</span>: <span style="color:#e6db74">&#34;http://www.w3.org/ns/anno.jsonld&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;items&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;https://annotations.allmaps.org/maps/d4c61e6dcd17aae5&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Annotation&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;@context&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;http://iiif.io/api/extension/georef/1/context.json&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;http://iiif.io/api/presentation/3/context.json&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;motivation&#34;</span>: <span style="color:#e6db74">&#34;georeferencing&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;target&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;SpecificResource&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;source&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;https://iiif.digitalcommonwealth.org/iiif/2/commonwealth:zc77wd40b&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;ImageService2&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;height&#34;</span>: <span style="color:#ae81ff">5585</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;width&#34;</span>: <span style="color:#ae81ff">4262</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;selector&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;SvgSelector&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;&lt;svg width=\&#34;4262\&#34; height=\&#34;5585\&#34;&gt;&lt;polygon points=\&#34;0,0 0,5585 4262,5585 4262,0\&#34; /&gt;&lt;/svg&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;body&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;FeatureCollection&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;transformation&#34;</span>: {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;polynomial&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;options&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;order&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;features&#34;</span>: [
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Feature&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;properties&#34;</span>: {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;resourceCoords&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">2675</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">1197</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geometry&#34;</span>: {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Point&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;coordinates&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">-70.204922</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">42.0251759</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Feature&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;properties&#34;</span>: {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;resourceCoords&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">1905</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">3259</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geometry&#34;</span>: {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Point&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;coordinates&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">-70.3489129</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">41.7205662</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Feature&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;properties&#34;</span>: {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;resourceCoords&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">209</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">4497</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;geometry&#34;</span>: {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Point&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;coordinates&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">-70.6671407</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">41.5266715</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="results">Results</h2>
<p>The <strong>Results</strong> tab gives you a preview of the map with georeferencing applied. It&rsquo;s a great way to check alignment and see if you&rsquo;re on the right track.</p>
<p><img src="../../images/georef_nz5_result.png" alt="Preview of results in Allmaps"></p>
<p>In the bottom right-hand corner of the interface, youâ€™ll see <strong>Drawers</strong> with more tools. From left to right, each <strong>Drawer</strong> includes:</p>
<ol>
<li><strong>Information</strong>: shares metadata about the IIIF resource</li>
<li><strong>GCP List</strong>: lists all your points; delete ones that don&rsquo;t work</li>
<li><strong>Code</strong>: shows the actual Georeference Annotation (JSON format). You can copy and reuse this in the Viewer.</li>
<li><strong>Share</strong>: provides&hellip;
<ul>
<li>A link to view in Allmaps Viewer</li>
<li>A link to the annotation</li>
<li>A <code>GeoJSON</code> download</li>
<li>An XYZ tile link (usable in web maps or GIS software)</li>
</ul>
</li>
</ol>
<p><img src="../../images/georef_nz6_Share.png" alt="The share menu in Allmaps"></p>
<p>We&rsquo;ll explore the Viewer in the next lesson. For now, click the <strong>View in Allmaps Viewer</strong> link in the share menu to continue.</p>
<h6 id="-back-to-lesson-1lesson-1"><a href="../lesson-1">â†© Back to Lesson 1</a></h6>
<h6 id="on-to-lesson-3-lesson-3"><a href="../lesson-3">On to Lesson 3 â†ª</a></h6>

        </section>
        <div class="post-tags">
          
          
          
        </div>
      </div>

      
      
    </div>

    </article>
</main>
<footer>
  <div style="display:flex"></div>
  <div class="footer-info" style="font-size:0.6em;">
    2025  â€¢Â <a
      href="https://github.com/athul/archie" target="blank">Archie</a> in <a target="blank" href="https://gohugo.io">Hugo</a> â€¢ Tutorials written by <a href="https://uwm-libraries.github.io/allmaps-intro-workshop/" target="blank">Stephen Appel (UWM-AGSL)</a> and adapted by <a href="https://www.leventhalmap.org/" target="blank">Ian Spangler (LMEC)</a> for the <a href="https://bostondh.org/symposium-2025/" target="blank">2025 Boston DH Symposium</a>
  </div>
</footer>



</div>
    </body>
</html>
